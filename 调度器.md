## goroutine和thread(系统线程)区别：（程序所处级别goroutine用户态thread内核态）

- 内存占用

创建一个goroutine内存消耗为2KB。创建一个thread内存消耗为1MB，而且还需要一个被称为“a gurad page”的区域用于和其他thread的栈空间进行隔离

对于Go server来说，对于每一个请求都是新创建一个goroutine来处理，单独的请求。如果对于thread作为并发原语很快程序就会OOM

- 创建和销毁

thread的创建和销毁消耗巨大，因为是和内核级的操作，通常需要线程池来解决。

goroutine是由go runtime 负责管理，创建和销毁的，消耗特别小，是用户级的

- 切换

thread切换，需要保存各种寄存器的值，以便将来进行恢复

goroutine切换只需要保存三个寄存器：program counter，stack pointer and BP

一般：thread切换需要消耗1000-1500纳秒，gouroutine切换需要200ns

## shecduler

Go的执行程序由两部分组成：Go program，Runtime

需要了解的知识点：

1. 线程私有变量，TLS技术





